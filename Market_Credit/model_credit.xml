<xmodel version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation='http://flame.ac.uk/schema/xmml_v2.xsd'>
    <!-- Model descriptions  -->
    <name>ICEACE</name>
    <version>Version 0.1.1, 06/05/2013</version>
    <description>'Credit Market. The market has regular firm as well as sepcialized construction firm, households, banks, central bank and government agents.</description>
    <environment>
        <constants>
            <variable>
                <type>double</type>
                <name>ratio_fiscal_policy</name>
                <description>Ratio of tax vs benefits to balance government deficit.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>ratio_capitalist_households</name>
                <description>It is the rate of households owning firm shares.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>inflation_target</name>
                <description>It is used by central bank to compute monthly inflation.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>firms_minimum_equity_ratio</name>
                <description>The paramter is used by funding agency to check equity requirement to invest in a firm.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>firm_startup_leverage</name>
                <description>Firms' starting leverage'.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>household_startup_leverage</name>
                <description>Households' starting leverage'.</description>
            </variable>
            <variable>
                <type>double</type>
                <name>car_buffer_threshold</name>
                <description>Allowable ratio of risky assets owned by bank for crediting.</description>
            </variable>
        </constants>
        <functionFiles>
        <!-- List of C files that hold agent functions -->
            <file>firm_functions_credit.c</file>
            <file>household_functions_credit.c</file>
            <file>government_functions_credit.c</file>
            <file>bank_functions_credit.c</file>
            <file>centralbank_functions_credit.c</file>
            <file>equityfund_functions_credit.c</file>
            <file>reagency_functions_credit.c</file>
        </functionFiles>
        <dataTypes>
            <dataType>
                <name>mortgage</name>
                <description>Household mortgage information.</description>
                <variables>
                    <variable>
                        <type>int</type>
                        <name>bank_id</name>
                        <description>Id of the bank from which mortgage is acquired.</description>
                    </variable>
                    <variable>
                        <type>double</type>
                        <name>principal</name>
                        <description>Principal amount left</description>
                        </variable>
                    <variable>
                        <type>int</type>
                        <name>quarters_left</name>
                        <description>Number of quarters left for the mortgage.</description>
                    </variable>
                    <variable>
                        <type>double</type>
                        <name>quarterly_interest</name>
                        <description>Amount of interest to be paid within the current quarter.</description>
                    </variable>
                    <variable>
                        <type>double</type>
                        <name>quarterly_principal</name>
                        <description>Amount of principal to be paid within the current quarter.</description>
                    </variable>
                </variables>
            </dataType>
            <dataType>
                <name>loan</name>
                <description>Used by firm to hold loans they owe to each bank.</description>
                <variables>
                    <variable>
                        <type>int</type>
                        <name>bank_id</name>
                        <description>Id of the bank from which loan is acquired.</description>
                    </variable>
                    <variable>
                        <type>double</type>
                        <name>amount</name>
                        <description>The amount requested so far.</description>
                    </variable>
                    <variable>
                        <type>double</type>
                        <name>to_be_paid</name>
                        <description>The amount to be paid.</description>
                    </variable>
                </variables>
            </dataType>
        </dataTypes>
    </environment>
	<!-- List of agents -->
    <agents>
        <xagent>
            <name>reagency</name>
            <description>Real Estate Agency.</description>
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the end of a quarter.</description>
                    <currentState>REAgencyCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>reagency_check_interest_rate</name>
                    <description>It checks interest rate.</description>
                    <currentState>REAgencyCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                    <input>
                        <messageName>interest_rate</messageName>
                    </input>
                </function>
            </functions>
        </xagent>
        <xagent>
            <name>firm</name>
            <description>A firm agent.</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>loans_interest_rate</name>
                    <description>Rate of interest paid by firms to banks for the loans.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>debt</name>
                    <description>Total debt of the firm.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>inventory</name>
                    <description>Unsold inventory from previous month.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>sales</name>
                    <description>Total number of sales within a month.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>revenues</name>
                    <description>Total revenue from sales. It is offset quarterly.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_assets</name>
                    <description>Total assets of a firm.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>operating_costs</name>
                    <description>Total operation costs.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_costs</name>
                    <description>Total labour costs.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_interest_payments</name>
                    <description>Total ineterests paid on a quarterly  basis for the bank loans.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_paid</name>
                    <description>Amount of dividends paid to share holders via Equity Fund.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_to_be_paid</name>
                    <description>Amount of dividends to be paid based on previous quarter operation.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>retained_earnings</name>
                    <description>Amount of dividends retained by the firm.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>net_earnings</name>
                    <description>Quarterly profit after ineterest payments.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>ebit</name>
                    <description>Firm earnings before ineterest and taxes.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Firm equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Liquidity.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>capital_goods</name>
                    <description>Capital goods in units.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>capital_goods_price</name>
                    <description>Unit price for capital goods.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>isliquidshort</name>
                    <description>The variable holds wheather a firm had any liquidity need in the latest quarter.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>hasloan</name>
                    <description>The variable holds wheather a firm been credited by a bank for the loan that was requested.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>hasinvestment</name>
                    <description>The variable holds wheather a firm has recieved investment from the fund for its liquidity need.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>isilliquid</name>
                    <description>Flag 0 or 1. Tells whether the firm ended up in illiquidity bankruptcy.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>planned_investment_costs</name>
                    <description>Amount of investment to be made.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity_need</name>
                    <description>The variable holds wheather a firm needs liquidity to pay debt and dividends.</description>
                </variable>
                <variable>
                    <type>loan</type>
                    <name>loan_list[2]</name>
                    <description>Holds loans owed to each bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_tax_rate</name>
                    <description>Tax rate to be used to pay labour tax.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the start of a quarter.</description>
                    <currentState>FirmCreditStart</currentState>
                    <nextState>FirmProductionStart</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_compute_income_statement</name>
                    <description>computing firm balance sheet.</description>
                    <currentState>FirmCreditStart</currentState>
                    <nextState>FirmCreditInvestment</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_investment_decisions</name>
                    <description>computing firm balance sheet.</description>
                    <currentState>FirmCreditInvestment</currentState>
                    <nextState>FirmCreditComputeDividends</nextState>
                </function>
                <function>
                    <name>firm_credit_compute_dividends</name>
                    <description>computing dividends to be paid.</description>
                    <currentState>FirmCreditComputeDividends</currentState>
                    <nextState>FirmCreditLiquidityNeed</nextState>
                </function>
                <function>
                    <name>firm_credit_check_liquidity_need</name>
                    <description>Firm checks if it needs liquidity to pay loans and dividends.</description>
                    <currentState>FirmCreditLiquidityNeed</currentState>
                    <nextState>FirmCreditStatus</nextState>
                </function>
                <function>
                    <name>idle</name>
                    <description>Firm does not need loans.</description>
                    <currentState>FirmCreditStatus</currentState>
                    <nextState>FirmCreditPayments</nextState>
                    <condition>
                        <lhs>
                            <value>a.isliquidshort</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>0</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_demand_loans_1</name>
                    <description>Firm computes loan demand and places a demand if it needs and if it is allowed to do so.</description>
                    <currentState>FirmCreditStatus</currentState>
                    <nextState>FirmCreditLoanBorrow1</nextState>
                    <condition>
                        <lhs>
                            <value>a.isliquidshort</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>0</value>
                        </rhs>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>firm_bank_loan_request_1</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>firm_credit_borrow_loans_1</name>
                    <description>Firm checks whether first loan request is accepted. When not, places another request to another bank.</description>
                    <currentState>FirmCreditLoanBorrow1</currentState>
                    <nextState>FirmCreditLoanBorrow2</nextState>
                    <inputs>
                        <input>
                            <messageName>bank_firm_loan_acknowledge_1</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.firm_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                    <outputs>
                        <output>
                            <messageName>firm_bank_loan_request_2</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>idle</name>
                    <description>The firm has gotten loan.</description>
                    <currentState>FirmCreditLoanBorrow2</currentState>
                    <nextState>FirmCreditPayments</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasloan</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_borrow_loans_2</name>
                    <description>Firm checks weather second loan request is accepted.</description>
                    <currentState>FirmCreditLoanBorrow2</currentState>
                    <nextState>FirmCreditIlliquidityStatus</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasloan</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>bank_firm_loan_acknowledge_2</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.firm_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>idle</name>
                    <description>The firm has gotten loan in the second trial.</description>
                    <currentState>FirmCreditIlliquidityStatus</currentState>
                    <nextState>FirmCreditPayments</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasloan</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_request_equityfund_investment</name>
                    <description>The firm checks its illiquidity state. It places a request for investment from Equity Fund.</description>
                    <currentState>FirmCreditIlliquidityStatus</currentState>
                    <nextState>FirmCreditLiquidityRecheck</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasloan</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>fund_request</messageName>
                        </output>
                    </outputs>
                </function>
                
                <function>
                    <name>idle</name>
                    <description>The firm checks for decision by Equity Fund.</description>
                    <currentState>FirmCreditLiquidityRecheck</currentState>
                    <nextState>FirmCreditPayments</nextState>
                    <condition>
                        <lhs>
                            <value>a.liquidity_need</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>0</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_check_equityfund_investment</name>
                    <description>The firm checks for decision by Equity Fund.</description>
                    <currentState>FirmCreditLiquidityRecheck</currentState>
                    <nextState>FirmCreditBankruptcy</nextState>
                    <condition>
                        <lhs>
                            <value>a.liquidity_need</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>0</value>
                        </rhs>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>fund_request_ack</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.firm_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>idle</name>
                    <description>The firm has the investment goes paying loans.</description>
                    <currentState>FirmCreditBankruptcy</currentState>
                    <nextState>FirmCreditPayments</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasinvestment</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_illiquidity_bankrupt</name>
                    <description>Firm cannot recieve fund goes illiquidity.</description>
                    <currentState>FirmCreditBankruptcy</currentState>
                    <nextState>FirmCreditBalanceSheet</nextState>
                    <condition>
                        <lhs>
                            <value>a.hasinvestment</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>loan_writeoff</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>firm_credit_pay_interest_on_loans</name>
                    <description>Each quarter firm sends out intterest on the loans it has.</description>
                    <currentState>FirmCreditPayments</currentState>
                    <nextState>FirmCreditDividendPayments</nextState>
                    <outputs>
                        <output>
                            <messageName>firm_bank_interest_on_loan</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>firm_credit_pay_dividends</name>
                    <description>At the end of a quarter, a firm sends net profit to the equity fund.</description>
                    <currentState>FirmCreditDividendPayments</currentState>
                    <nextState>FirmCreditBalanceSheet</nextState>
                    <outputs>
                        <output>
                            <messageName>firm_net_profit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>firm_credit_do_balance_sheet</name>
                    <description>Updating the balance sheet.</description>
                    <currentState>FirmCreditBalanceSheet</currentState>
                    <nextState>FirmCreditInsolvencyCheck</nextState>
                </function>
        
                <function>
                    <name>idle</name>
                    <description>Firm is not insolvent. Keeps it regular activities.</description>
                    <currentState>FirmCreditInsolvencyCheck</currentState>
                    <nextState>FirmProductionStart</nextState>
                    <condition>
                        <lhs>
                            <value>a.isinsolvent</value>
                        </lhs>
                        <op>NEQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_insolvency_bankruptcy</name>
                    <description>The firm checks its illiquidity state, checking the deal with Equity Fund.</description>
                    <currentState>FirmCreditInsolvencyCheck</currentState>
                    <nextState>FirmProductionStart</nextState>
                    <condition>
                        <lhs>
                            <value>a.isinsolvent</value>
                        </lhs>
                        <op>EQ</op>
                        <rhs>
                            <value>1</value>
                        </rhs>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>firm_bank_insolvent_account</messageName>
                        </output>
                        <output>
                            <messageName>new_entrant_loan</messageName>
                        </output>
                        <output>
                            <messageName>loan_writeoff</messageName>
                        </output>
                    </outputs>
                </function>
                
                
                <function>
                    <name>idle</name>
                    <description>It is not time to act.</description>
                    <currentState>FirmCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>firm_credit_check_interest_rate</name>
                    <description>Firm checks quarterly interest rate.</description>
                    <currentState>FirmCreditPolicyChecks</currentState>
                    <nextState>FirmCreditCheckTaxRate</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>interest_rate</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>firm_credit_check_tax_rate</name>
                    <description>Firm checks quarterly tax rate.</description>
                    <currentState>FirmCreditCheckTaxRate</currentState>
                    <nextState>end</nextState>
                    <inputs>
                        <input>
                            <messageName>labour_tax_rate</messageName>
                        </input>
                    </inputs>
                </function>
            </functions>
        </xagent>
        <xagent>
            <name>bank</name>
            <description>A bank agent.</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>total_assets</name>
                    <description>Total assets of the banks.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>loans</name>
                    <description>Loans to firms.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>loans_start</name>
                    <description>Loans to firms at the start of the quarter.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>mortgages</name>
                    <description>Mortgages to households.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>deposits</name>
                    <description>Deposits recieved from private sector.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>centralbank_debt</name>
                    <description>Debt to central bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Firm equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Liquidity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>revenues</name>
                    <description>Revenues of the bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_writeoffs</name>
                    <description>Total of writeoff loss a bank has.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>interest_rate</name>
                    <description>Rate of interest set by central bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>interests_accrued</name>
                    <description>Total interest a bank has collected from loans and mortgages.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>interests_paid</name>
                    <description>Total interest a bank has paid to for its central bank debts.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_paid</name>
                    <description>Amount of dividends paid to share holders via Equity Fund.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_dividends</name>
                    <description>Amount of dividends banks have to distribute.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>retained_earnings</name>
                    <description>Retained earnings in the case of capital inadequecy.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>net_earnings</name>
                    <description>Earnings from interests minus costs.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_costs</name>
                    <description>Total costs of banks. It is interest paid to CB and writeoffs recieved.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the start of a quarter.</description>
                    <currentState>BankCreditStart</currentState>
                    <nextState>BankHousingMarket</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>bank_credit_compute_income_statement</name>
                    <description>Bank computes income statement.</description>
                    <currentState>BankCreditStart</currentState>
                    <nextState>BankCreditDividends</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>bank_centralbank_interest_payment</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>bank_credit_compute_dividends</name>
                    <description>Bank evaluates loan requests firstly. </description>
                    <currentState>BankCreditDividends</currentState>
                    <nextState>BankCreditBalanceSheet</nextState>
                    <outputs>
                        <output>
                            <messageName>bank_net_profit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>bank_credit_do_balance_sheet</name>
                    <description>Bank balance sheet accounting activities.</description>
                    <currentState>BankCreditBalanceSheet</currentState>
                    <nextState>BankCreditRequest1</nextState>
                    <outputs>
                        <output>
                            <messageName>bank_centralbank_debt_request</messageName>
                        </output>
                        <output>
                            <messageName>bank_centralbank_debt_payment</messageName>
                        </output>
                        <output>
                            <messageName>bank_centralbank_update_deposit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>bank_credit_process_loan_requests_1</name>
                    <description>Bank evaluates first loan requests.</description>
                    <currentState>BankCreditRequest1</currentState>
                    <nextState>BankCreditRequest2</nextState>
                    <inputs>
                        <input>
                            <messageName>firm_bank_loan_request_1</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                    <outputs>
                        <output>
                            <messageName>bank_firm_loan_acknowledge_1</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>bank_credit_process_loan_requests_2</name>
                    <description>Bank evaluates first loan requests.</description>
                    <currentState>BankCreditRequest2</currentState>
                    <nextState>BankCreditLoanWriteOffs</nextState>
                    <inputs>
                        <input>
                            <messageName>firm_bank_loan_request_2</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                    <outputs>
                        <output>
                            <messageName>bank_firm_loan_acknowledge_2</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>bank_credit_recieve_loan_writeoffs</name>
                    <description>Bank updates its loss.</description>
                    <currentState>BankCreditLoanWriteOffs</currentState>
                    <nextState>BankCreditNewEntrants</nextState>
                    <inputs>
                        <input>
                            <messageName>loan_writeoff</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                        <input>
                            <messageName>firm_bank_insolvent_account</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>bank_credit_recieve_new_entrant_loan_requests</name>
                    <description>Bank recieve request for new entrant requests.</description>
                    <currentState>BankCreditNewEntrants</currentState>
                    <nextState>BankCreditLoanInterests</nextState>
                    <inputs>
                        <input>
                            <messageName>new_entrant_loan</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>bank_credit_collect_loan_interests</name>
                    <description>Bank evaluates first loan requests.</description>
                    <currentState>BankCreditLoanInterests</currentState>
                    <nextState>BankHousingMarket</nextState>
                    <inputs>
                        <input>
                            <messageName>firm_bank_interest_on_loan</messageName>
                            <filter>
                                <!-- checks self id. -->
                                <lhs><value>a.id</value></lhs>
                                <op>EQ</op>
                                <rhs><value>m.bank_id</value></rhs>
                            </filter>
                        </input>
                    </inputs>
                </function>
                
                
                <function>
                    <name>idle</name>
                    <description>It is not time to act.</description>
                    <currentState>BankCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>bank_credit_check_interest_rate</name>
                    <description>Bank checks centralbank ineterest rate.</description>
                    <currentState>BankCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time><
                    </condition>
                    <inputs>
                        <input>
                            <messageName>interest_rate</messageName>
                        </input>
                    </inputs>
                </function>
            </functions>
        </xagent>
        <xagent>
            <name>centralbank</name>
            <description>A Central Bank agent.</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>interest_rate</name>
                    <description>Rate of interest set by central bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Central Bank liquidity</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>loans_banks</name>
                    <description>loans to firms.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>loans_government</name>
                    <description>loans to the government.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>fiat_money</name>
                    <description>Outstanding fiat money.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Firm equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity_banks</name>
                    <description>Liquidity kept for banks.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity_government</name>
                    <description>Liquidity kept for the government.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity_equityfund</name>
                    <description>Liquidity kept for the fund.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_assets</name>
                    <description>Central Bank total assets.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_writeoffs</name>
                    <description>Central Bank loss due to bank bailouts.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>interests_accrued</name>
                    <description>Amount of interest collected from banks and government.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>revenues</name>
                    <description>Central Bank revenues.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>net_earnings</name>
                    <description>Central Bank net earnings.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_costs</name>
                    <description>Central Bank total costs.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not time to act.</description>
                    <currentState>CentralBankCredit</currentState>
                    <nextState>CentralBankConsumption</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>centralbank_collect_interest_payments</name>
                    <description>Central Bank collects interest payments from banks.</description>
                    <currentState>CentralBankCredit</currentState>
                    <nextState>CentralBankDebtRequests</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>bank_centralbank_interest_payment</messageName>
                        </input>
                    </inputs>
                </function>
                
                <function>
                    <name>centralbank_process_debt_requests</name>
                    <description>Central Bank receives new debt requests from banks and collects debt payments from banks.</description>
                    <currentState>CentralBankDebtRequests</currentState>
                    <nextState>CentralBankConsumption</nextState>
                    <inputs>
                        <input>
                            <messageName>bank_centralbank_debt_request</messageName>
                        </input>
                        <input>
                            <messageName>bank_centralbank_debt_payment</messageName>
                        </input>
                        <input>
                            <messageName>bank_centralbank_update_deposit</messageName>
                        </input>
                    </inputs>
                </function>
                
                <function>
                    <name>idle</name>
                    <description>It is not time to act.</description>
                    <currentState>CentralBankPolicy</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>centralbank_compute_income_statement</name>
                    <description>Central Bank computes income statement.</description>
                    <currentState>CentralBankPolicy</currentState>
                    <nextState>CentralBankGovernmentRequests</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>centralbank_government_profit</messageName>
                        </output>
                    </outputs>
                </function>
                
                <function>
                    <name>centralbank_process_government_requests</name>
                    <description>Central Bank processes loan requests and loan payments from the government.</description>
                    <currentState>CentralBankGovernmentRequests</currentState>
                    <nextState>CentralBankBalanceSheet</nextState>
                    <inputs>
                        <input>
                            <messageName>gov_centralbank_debt_request</messageName>
                        </input>
                        <input>
                            <messageName>gov_centralbank_debt_payment</messageName>
                        </input>
                        <input>
                            <messageName>gov_centralbank_update_deposit</messageName>
                        </input>
                    </inputs>
                </function>
                
                <function>
                    <name>centralbank_do_balance_sheet</name>
                    <description>Central Bank balance sheet accounting activities.</description>
                    <currentState>CentralBankBalanceSheet</currentState>
                    <nextState>CentralBankUpdateInterestRate</nextState>
                    <inputs>
                        <input>
                            <messageName>fund_centralbank_update_deposit</messageName>
                        </input>
                    </inputs>
                </function>
                
                <function>
                    <name>centralbank_set_interest_rate</name>
                    <description>Central bank sets the interest rate.</description>
                    <currentState>CentralBankUpdateInterestRate</currentState>
                    <nextState>end</nextState>
                    <outputs>
                        <output>
                            <messageName>interest_rate</messageName>
                        </output>
                    </outputs>
                </function>
                
            </functions>
        </xagent>
        <xagent>
            <name>household</name>
            <description>The household agent at credit market.</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>mortgages_interest_rate</name>
                    <description>Rate of interest set by the central bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_tax_rate</name>
                    <description>Rate of tax set by the government.</description>
                </variable>
                <variable>
                    <type>mortgage_array</type>
                    <name>mortgages_list</name>
                    <description>List of mortgages debted by households.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>mortgages</name>
                    <description>Total mortgage.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>housing_payment</name>
                    <description>Holds total mortgage payment done within the last quarter.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Household equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>housing_price</name>
                    <description>Market value of a unit housing.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>housing_units</name>
                    <description>Number of housing units owned by a household.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>n_shares</name>
                    <description>Number of shares an household owns.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Liquidity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>capital_income</name>
                    <description>Equity fund shares recieved quarterly.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>previous_wages[3]</name>
                    <description>Holds wages earned in three previous months.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>previous_benefits[3]</name>
                    <description>Holds benefits from the govenment in three previous months.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_income</name>
                    <description>Labour income for last 3 months.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>total_assets</name>
                    <description>Total assets owned by an household.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>housing_value</name>
                    <description>Monetary value of housing units owned by an household.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>expected_housing_payment</name>
                    <description>It keeps payment amount for the incoming quarter.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the start of a quarter.</description>
                    <currentState>HHCreditStart</currentState>
                    <nextState>HHCreditMonthly</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>idle</name>
                    <description>It is the start of a quarter.</description>
                    <currentState>HHCreditStart</currentState>
                    <nextState>HHCreditIsCapitalist</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                </function>
                <function>
                    <name>idle</name>
                    <description>The household does not own any shares of firms.</description>
                    <currentState>HHCreditIsCapitalist</currentState>
                    <nextState>HHCreditBalanceSheet</nextState>
                    <condition>
                        <lhs><value>a.n_shares</value></lhs>
                        <op>EQ</op>
                        <rhs><value>0</value></rhs>
                    </condition>
                </function>
                <function>
                    <name>household_credit_collect_shares</name>
                    <description>At the end of a quarter household recieves shares from the firms via Equity Fund.</description>
                    <currentState>HHCreditIsCapitalist</currentState>
                    <nextState>HHCreditBalanceSheet</nextState>
                    <condition>
                        <lhs><value>a.n_shares</value></lhs>
                        <op>GT</op>
                        <rhs><value>0</value></rhs>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>household_share</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>household_credit_do_balance_sheet</name>
                    <description>Computing the balance sheet.</description>
                    <currentState>HHCreditBalanceSheet</currentState>
                    <nextState>HHCreditMonthly</nextState>
                </function>
    
                <function>
                    <name>idle</name>
                    <description>It is not the end of the month.</description>
                    <currentState>HHCreditMonthly</currentState>
                    <nextState>HHLabourStart</nextState>
                    <condition>
                        <not><time>
                            <period>monthly</period>
                            <phase>a.day_of_month_wage_recieved</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>household_credit_collect_benefits</name>
                    <description>Collect general transfer benefits and/or unemployment benefit from the government.</description>
                    <currentState>HHCreditMonthly</currentState>
                    <nextState>HHLabourStart</nextState>
                    <condition>
                        <time>
                            <period>monthly</period>
                            <phase>a.day_of_month_wage_recieved</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>general_benefit</messageName>
                        </input>
                        <input>
                            <messageName>unemployment_benefit</messageName>
                        </input>
                    </inputs>
                </function>
                
                
                <function>
                    <name>idle</name>
                    <description>It is not the end of a quarter.</description>
                    <currentState>HHCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>household_credit_check_interest_rate</name>
                    <description>Households check the interest rate which is set by CB.</description>
                    <currentState>HHCreditPolicyChecks</currentState>
                    <nextState>HHCreditUpdateAnnuity</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>interest_rate</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>household_credit_update_mortgage_rates</name>
                    <description>Households updates annuity, principal and interest payment amounts.</description>
                    <currentState>HHCreditUpdateAnnuity</currentState>
                    <nextState>HHCreditCheckTaxRate</nextState>
                </function>
                <function>
                    <name>household_credit_check_tax_rate</name>
                    <description>Households check the tax rate which is set by government.</description>
                    <currentState>HHCreditCheckTaxRate</currentState>
                    <nextState>end</nextState>
                    <inputs>
                        <input>
                            <messageName>labour_tax_rate</messageName>
                        </input>
                    </inputs>
                </function>


            </functions>
        </xagent>
        <xagent>
            <name>equityfund</name>
            <description>The Equity Fund agency.</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>share_firms</name>
                    <description>Shares owned by regular firms.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>share_construction_firms</name>
                    <description>Shares owned by constructor firms.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>share_banks</name>
                    <description>Shares owned by banks.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Firm equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Liquidity.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>n_shares</name>
                    <description>Number of households(shares) to recieve liquid shares from firm net income.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_recieved</name>
                    <description>Total amount dividends recieved from firms and banks</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_retained</name>
                    <description>Total amount of dividends retained.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>dividends_paid</name>
                    <description>Total amount of dividends distributed to shareholders.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>firm_investment</name>
                    <description>Total amount of liquidity used for firms with liquidity needs.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>capital_tax_rate</name>
                    <description>Tax rate used at determining amount of tax on dividends.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the start of a quarter.</description>
                    <currentState>EquityFundCredit</currentState>
                    <nextState>EFLabourMarket</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>equityfund_credit_invest_illiquids</name>
                    <description>The equity fund invests certain firms to resolve their liquidity problem.</description>
                    <currentState>EquityFundCredit</currentState>
                    <nextState>EFCreditShareCollectionBanks</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>fund_request</messageName>
                            <random>true</random>
                        </input>
                    </inputs>
                    <outputs>
                        <output>
                            <messageName>fund_request_ack</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>equityfund_credit_collect_bank_shares</name>
                    <description>At the end of a quarter collect net income from the banks in the market.</description>
                    <currentState>EFCreditShareCollectionBanks</currentState>
                    <nextState>EFCreditShareCollectionFirms</nextState>
                    <inputs>
                        <input>
                            <messageName>bank_net_profit</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>equityfund_credit_collect_firm_shares</name>
                    <description>At the end of a quarter collect net income from the firms in the market.</description>
                    <currentState>EFCreditShareCollectionFirms</currentState>
                    <nextState>EFCreditDistributeShares</nextState>
                    <inputs>
                        <input>
                            <messageName>firm_net_profit</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>equityfund_credit_distribute_shares</name>
                    <description>At the end of a quarter net income per household is distributed.</description>
                    <currentState>EFCreditDistributeShares</currentState>
                    <nextState>EFLabourMarket</nextState>
                    <outputs>
                        <output>
                            <messageName>household_share</messageName>
                        </output>
                        <output>
                            <messageName>capital_tax</messageName>
                        </output>
                    </outputs>
                </function>
                
                <function>
                    <name>idle</name>
                    <description>It is not the end of a quarter.</description>
                    <currentState>EFCreditIncomeStatement</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>equityfund_credit_compute_income_statement</name>
                    <description>Equity Fund computes the income statement.</description>
                    <currentState>EFCreditIncomeStatement</currentState>
                    <nextState>EFCreditBalanceSheet</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                </function>
                <function>
                    <name>equityfund_credit_do_balance_sheet</name>
                    <description>Equity fund balance sheet accounting activities.</description>
                    <currentState>EFCreditBalanceSheet</currentState>
                    <nextState>EFCreditPolicyChecks</nextState>
                    <outputs>
                        <output>
                            <messageName>fund_centralbank_update_deposit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>equityfund_credit_check_tax_rate</name>
                    <description>Equity fund checks quarterly tax rate.</description>
                    <currentState>EFCreditPolicyChecks</currentState>
                    <nextState>end</nextState>
                    <inputs>
                        <input>
                            <messageName>capital_tax_rate</messageName>
                        </input>
                    </inputs>
                </function>
                
            </functions>
        </xagent>
        <xagent>
            <name>government</name>
            <description>A simple government agent</description>
            <!-- Agent memory holding a list of variables -->
            <memory>
                <variable>
                    <type>double</type>
                    <name>debt</name>
                    <description>Debt to central bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>equity</name>
                    <description>Government equity.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Government liquidity.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>day_of_month_to_act</name>
                    <description>Day of the month to act.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>day_of_month_wages_paid</name>
                    <description>The day of month wages paid. It is the end of month.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>capital_tax_rate</name>
                    <description>Government rate on capital income.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_tax_rate</name>
                    <description>Government rate on labour income.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>labour_tax_income</name>
                    <description>Collected amount of labour tax.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>capital_tax_income</name>
                    <description>Collected amount of capital tax.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>gov_general_benefit_rate</name>
                    <description>Rate of general benefits to distribute to all housholds.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>gov_unemployment_rate</name>
                    <description>Rate of unemployment benefit with respect to average wage.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>general_benefits</name>
                    <description>Amount of general benefits distributed to households.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>unemployment_benefits</name>
                    <description>Amount of unemployment benefits distributed by the government.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>earnings</name>
                    <description>Government earnings from taxes.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>centralbank_income</name>
                    <description>Quarterly collected amount of profits from centralbank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>expenditures</name>
                    <description>Government expenditures on unemployment and general benefit payments.</description>
                </variable>
            </memory>
            <!-- List of agent functions -->
            <functions>
                <function>
                    <name>idle</name>
                    <description>It is not the start of a quarter.</description>
                    <currentState>GovernmentCredit</currentState>
                    <nextState>GovernmentMonthly</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>government_collect_capital_tax</name>
                    <description>It is the start of the quarter.</description>
                    <currentState>GovernmentCredit</currentState>
                    <nextState>GovernmentMonthly</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>1</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>capital_tax</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>idle</name>
                    <description>It is not the end of a month.</description>
                    <currentState>GovernmentMonthly</currentState>
                    <nextState>GovernmentFiscalPolicy</nextState>
                    <condition>
                        <not><time>
                            <period>monthly</period>
                            <phase>a.day_of_month_wages_paid</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>government_distribute_general_benefits</name>
                    <description>It distributes general benefits.</description>
                    <currentState>GovernmentMonthly</currentState>
                    <nextState>GovernmentUnemploymentBenefits</nextState>
                    <condition>
                        <time>
                            <period>monthly</period>
                            <phase>a.day_of_month_wages_paid</phase>
                        </time>
                    </condition>
                    <outputs>
                        <output>
                            <messageName>general_benefit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>government_distribute_unemployment_benefits</name>
                    <description>It distributes unemployment benefits.</description>
                    <currentState>GovernmentUnemploymentBenefits</currentState>
                    <nextState>GovernmentLabourTax</nextState>
                    <outputs>
                        <output>
                            <messageName>unemployment_benefit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>government_collect_labour_tax</name>
                    <description>Labour tax is collected</description>
                    <currentState>GovernmentLabourTax</currentState>
                    <nextState>GovernmentLabourStatus</nextState>
                    <inputs>
                        <input>
                            <messageName>labour_tax</messageName>
                        </input>
                    </inputs>
                </function>
                
                <function>
                    <name>idle</name>
                    <description>It is not the end of a quarter.</description>
                    <currentState>GovernmentFiscalPolicy</currentState>
                    <nextState>end</nextState>
                    <condition>
                        <not><time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time></not>
                    </condition>
                </function>
                <function>
                    <name>government_collect_centralbank_profit</name>
                    <description>The government collects net profit from the centralbank.</description>
                    <currentState>GovernmentFiscalPolicy</currentState>
                    <nextState>GovernmentIncomeStatement</nextState>
                    <condition>
                        <time>
                            <period>quarterly</period>
                            <phase>0</phase>
                        </time>
                    </condition>
                    <inputs>
                        <input>
                            <messageName>centralbank_government_profit</messageName>
                        </input>
                    </inputs>
                </function>
                <function>
                    <name>government_compute_income_statement</name>
                    <description>Government computes its income statement.</description>
                    <currentState>GovernmentIncomeStatement</currentState>
                    <nextState>GovernmentBalanceSheet</nextState>
                </function>
                <function>
                    <name>government_do_balance_sheet</name>
                    <description>Government balance sheet accounting activities.</description>
                    <currentState>GovernmentBalanceSheet</currentState>
                    <nextState>GovernmentUpdatePolicy</nextState>
                    <outputs>
                        <output>
                            <messageName>gov_centralbank_debt_request</messageName>
                        </output>
                        <output>
                            <messageName>gov_centralbank_debt_payment</messageName>
                        </output>
                        <output>
                            <messageName>gov_centralbank_update_deposit</messageName>
                        </output>
                    </outputs>
                </function>
                <function>
                    <name>government_update_fiscal_policy</name>
                    <description>Government sets tax rate, general benefits and unemployment benefits</description>
                    <currentState>GovernmentUpdatePolicy</currentState>
                    <nextState>end</nextState>
                    <outputs>
                        <output>
                            <messageName>capital_tax_rate</messageName>
                        </output>
                        <output>
                            <messageName>labour_tax_rate</messageName>
                        </output>
                    </outputs>
                </function>
                
            </functions>
        </xagent>
    </agents>
    <messages>
        <message>
            <name>firm_bank_loan_request_1</name>
            <description>The loan requested by a firm.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description>The firm.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>firm_bank_loan_request_2</name>
            <description>The loan requested by a firm.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description>The firm.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_firm_loan_acknowledge_1</name>
            <description>The loan that is acknowledged by a firms's own bank.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description>The firm.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_firm_loan_acknowledge_2</name>
            <description>The loan acknowledged for a firm by the other bank.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description>The firm.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_centralbank_debt_request</name>
            <description>Debt request by bank from the central bank.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank id</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>amount requested</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>household_share</name>
            <description>Shares are sent to households.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Share per household.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>capital_tax</name>
            <description>Tax on capital earnings of households.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Total capital tax sent by household.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>labour_tax</name>
            <description>Tax on wage earning of households.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Total wage taxes sent to government by househols.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>unemployment_benefit</name>
            <description>Total unemployment benefit sent to households.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description></description>
                </variable>
            </variables>
        </message>
        <message>
            <name>general_benefit</name>
            <description>general benefit sent to households.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description></description>
                </variable>
            </variables>
        </message>
        <message>
            <name>fund_request</name>
            <description>Amount of the liquidity requested from Equity Fund.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description></description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description></description>
                </variable>
            </variables>
        </message>
        <message>
            <name>fund_request_ack</name>
            <description>Amount of the liquidity requested is confirmed by Equity Fund.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description></description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description></description>
                </variable>
            </variables>
        </message>
        <message>
            <name>new_entrant_loan</name>
            <description>The loan requested by the new entrant, that replaces the insolvent one.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>firm_id</name>
                    <description>The firm.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>firm_bank_interest_on_loan</name>
            <description>Quarterly interest that is paid by a firm.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>The bank.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>The amount.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>loan_writeoff</name>
            <description>Amount of loan of a firm that is written off.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>Agent ID of the bank to receive.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description></description>
                </variable>
            </variables>
        </message>
        <message>
            <name>firm_bank_insolvent_account</name>
            <description>Acount maintainance in case of insolvency.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>bank_id</name>
                    <description>Bank ID of the account.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>liquidity</name>
                    <description>Amount of liquidity</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>firm_net_profit</name>
            <description>Net income send to Equity Fund.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>id</name>
                    <description>Firm agent ID.</description>
                </variable>
                <variable>
                    <type>int</type>
                    <name>isconstructor</name>
                    <description>Flag to label whether the income is recieved from a constructor firm.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>net_income</name>
                    <description>Net income to be distributed.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_net_profit</name>
            <description>Net income send to Equity Fund.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>id</name>
                    <description>Bank Agent ID.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>net_income</name>
                    <description>Net income to be distributed.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_centralbank_interest_payment</name>
            <description>Interest paid by bank to centralbank.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>id</name>
                    <description>Bank Agent ID.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Amount of interest payment.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>bank_centralbank_debt_payment</name>
            <description>Debt paid by bank to centralbank.</description>
            <variables>
                <variable>
                    <type>int</type>
                    <name>id</name>
                    <description>Bank Agent ID.</description>
                </variable>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Amount of debt paid back.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>gov_centralbank_debt_request</name>
            <description>Government requests debt from the centralbank.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Amount of liquidity needed.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>gov_centralbank_debt_payment</name>
            <description>Government pays debt to centralbank.</description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Amount of payment.</description>
                </variable>
            </variables>
        </message>
        <message>
            <name>centralbank_government_profit</name>
            <description>Amount of profit transfered to the government. </description>
            <variables>
                <variable>
                    <type>double</type>
                    <name>amount</name>
                    <description>Amount of debt paid back.</description>
                </variable>
            </variables>
        </message>
    </messages>
</xmodel>